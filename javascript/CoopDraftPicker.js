var characters = [
  /*
  //Acheron
  {
    folder: "5 Stars",
    image: "Character_Acheron_Icon.webp",
    element: "Lightning",
    path: "Nihility",
    gender: "Female",
    range: "Melee",
  },
  */
  //Arlan
  {
    folder: "4 Stars",
    image: "Character_Arlan_Icon.webp",
    element: "Lightning",
    path: "Destruction",
    gender: "Male",
    range: "Melee",
  },
  //Argenti
  {
    folder: "5 Stars",
    image: "Character_Argenti_Icon.webp",
    element: "Physical",
    path: "Erudition",
    gender: "Male",
    range: "Melee",
  },
  //Asta
  {
    folder: "4 Stars",
    image: "Character_Asta_Icon.webp",
    element: "Fire",
    path: "Harmony",
    gender: "Female",
    range: "Ranged",
  },
  /*
  //Aventurine
  {
    folder: "5 Stars",
    image: "Character_Aventurine_Icon.webp",
    element: "Imaginary",
    path: "Preservation",
    gender: "Male",
    range: "Ranged",
  },
  */
  //Bailu
  {
    folder: "5 Stars",
    image: "Character_Bailu_Icon.webp",
    element: "Lightning",
    path: "Abundance",
    gender: "Female",
    range: "Melee",
  },
  //Black Swan
  {
    folder: "5 Stars",
    image: "Character_Black_Swan_Icon.webp",
    element: "Wind",
    path: "Nihility",
    gender: "Female",
    range: "Ranged",
  },
  //Blade
  {
    folder: "5 Stars",
    image: "Character_Blade_Icon.webp",
    element: "Wind",
    path: "Destruction",
    gender: "Male",
    range: "Melee",
  },
  //Bronya
  {
    folder: "5 Stars",
    image: "Character_Bronya_Icon.webp",
    element: "Wind",
    path: "Harmony",
    gender: "Female",
    range: "Ranged",
  },
  //Clara
  {
    folder: "5 Stars",
    image: "Character_Clara_Icon.webp",
    element: "Physical",
    path: "Destruction",
    gender: "Female",
    range: "Ranged",
  },
  //Dan Heng
  {
    folder: "4 Stars",
    image: "Character_Dan_Heng_Icon.webp",
    element: "Wind",
    path: "Hunt",
    gender: "Male",
    range: "Melee",
  },
  //Dan Heng Imbibitor Lunae
  {
    folder: "5 Stars",
    image: "Character_Dan_Heng_Imbibitor_Lunae_Icon.webp",
    element: "Imaginary",
    path: "Destruction",
    gender: "Male",
    range: "Ranged",
  },
  //Dr Ratio
  {
    folder: "5 Stars",
    image: "Character_Dr._Ratio_Icon.webp",
    element: "Imaginary",
    path: "Hunt",
    gender: "Male",
    range: "Melee", //He smacks with book
  },
  //Fu Xuan
  {
    folder: "5 Stars",
    image: "Character_Fu_Xuan_Icon.webp",
    element: "Quantum",
    path: "Preservation",
    gender: "Female",
    range: "Ranged",
  },
  //Gallagher
  /*
  {
    folder: "4 Stars",
    image: "Character_Gallagher_Icon.webp",
    element: "Fire",
    path: "Harmony",
    gender: "Male",
    range: "Melee",
  },
  */
  //Gepard
  {
    folder: "5 Stars",
    image: "Character_Gepard_Icon.webp",
    element: "Ice",
    path: "Preservation",
    gender: "Male",
    range: "Melee",
  },
  //Guinaifen
  {
    folder: "4 Stars",
    image: "Character_Guinaifen_Icon.webp",
    element: "Fire",
    path: "Nihility",
    gender: "Female",
    range: "Melee",
  },
  //Hanya
  {
    folder: "4 Stars",
    image: "Character_Hanya_Icon.webp",
    element: "Physical",
    path: "Harmony",
    gender: "Female",
    range: "Ranged",
  },
  //Herta
  {
    folder: "4 Stars",
    image: "Character_Herta_Icon.webp",
    element: "Ice",
    path: "Erudition",
    gender: "Female",
    range: "Melee",
  },
  //Himeko
  {
    folder: "5 Stars",
    image: "Character_Himeko_Icon.webp",
    element: "Fire",
    path: "Erudition",
    gender: "Female",
    range: "Melee",
  },
  //Hook
  {
    folder: "4 Stars",
    image: "Character_Hook_Icon.webp",
    element: "Fire",
    path: "Destruction",
    gender: "Female",
    range: "Melee",
  },
  //Huohuo
  {
    folder: "5 Stars",
    image: "Character_Huohuo_Icon.webp",
    element: "Wind",
    path: "Abundance",
    gender: "Female",
    range: "Melee",
  },
  //Jing Yuan
  {
    folder: "5 Stars",
    image: "Character_Jing_Yuan_Icon.webp",
    element: "Lightning",
    path: "Erudition",
    gender: "Male",
    range: "Melee",
  },
  //Jingliu
  {
    folder: "5 Stars",
    image: "Character_Jingliu_Icon.webp",
    element: "Ice",
    path: "Destruction",
    gender: "Female",
    range: "Melee",
  },
  //Kafka
  {
    folder: "5 Stars",
    image: "Character_Kafka_Icon.webp",
    element: "Lightning",
    path: "Nihility",
    gender: "Female",
    range: "Melee",
  },
  //Luka
  {
    folder: "4 Stars",
    image: "Character_Luka_Icon.webp",
    element: "Physical",
    path: "Nihility",
    gender: "Male",
    range: "Melee",
  },
  //Luka
  {
    folder: "5 Stars",
    image: "Character_Luocha_Icon.webp",
    element: "Imaginary",
    path: "Abundance",
    gender: "Male",
    range: "Melee",
  },
  //Lynx
  {
    folder: "4 Stars",
    image: "Character_Lynx_Icon.webp",
    element: "Quantum",
    path: "Abundance",
    gender: "Female",
    range: "Melee",
  },
  //March 7th
  {
    folder: "4 Stars",
    image: "Character_March_7th_Icon.webp",
    element: "Ice",
    path: "Preservation",
    gender: "Female",
    range: "Ranged",
  },
  //Misha
  {
    folder: "4 Stars",
    image: "Character_Misha_Icon.webp",
    element: "Ice",
    path: "Destruction",
    gender: "Male",
    range: "Melee",
  },
  //Natasha
  {
    folder: "4 Stars",
    image: "Character_Natasha_Icon.webp",
    element: "Physical",
    path: "Abundance",
    gender: "Female",
    range: "Ranged",
  },
  //Pela
  {
    folder: "4 Stars",
    image: "Character_Pela_Icon.webp",
    element: "Ice",
    path: "Nihility",
    gender: "Female",
    range: "Ranged",
  },
  //Qingque
  {
    folder: "4 Stars",
    image: "Character_Qingque_Icon.webp",
    element: "Quantum",
    path: "Erudition",
    gender: "Female",
    range: "Ranged",
  },
  //Ruan Mei
  {
    folder: "5 Stars",
    image: "Character_Ruan_Mei_Icon.webp",
    element: "Ice",
    path: "Harmony",
    gender: "Female",
    range: "Ranged",
  },
  //Sampo
  {
    folder: "4 Stars",
    image: "Character_Sampo_Icon.webp",
    element: "Wind",
    path: "Nihility",
    gender: "Male",
    range: "Melee",
  },
  //Seele
  {
    folder: "5 Stars",
    image: "Character_Seele_Icon.webp",
    element: "Quantum",
    path: "Hunt",
    gender: "Female",
    range: "Melee",
  },
  //Serval
  {
    folder: "4 Stars",
    image: "Character_Serval_Icon.webp",
    element: "Lightning",
    path: "Nihility",
    gender: "Female",
    range: "Ranged",
  },
  //Silver Wolf
  {
    folder: "5 Stars",
    image: "Character_Silver_Wolf_Icon.webp",
    element: "Quantum",
    path: "Nihility",
    gender: "Female",
    range: "Melee",
  },
  /*
  //Sparkle
  {
    folder: "5 Stars",
    image: "Character_Sparkle_Icon.webp",
    element: "Quantum",
    path: "Harmony",
    gender: "Female",
    range: "Melee",
  },
  */
  //Sushang
  {
    folder: "4 Stars",
    image: "Character_Sushang_Icon.webp",
    element: "Physical",
    path: "Hunt",
    gender: "Female",
    range: "Melee",
  },
  //Tingyun
  {
    folder: "4 Stars",
    image: "Character_Tingyun_Icon.webp",
    element: "Lightning",
    path: "Harmony",
    gender: "Female",
    range: "Melee",
  },
  //Topaz and Numby
  {
    folder: "5 Stars",
    image: "Character_Topaz_and_Numby_Icon.webp",
    element: "Fire",
    path: "Hunt",
    gender: "Female",
    range: "Ranged",
  },
  //Trailblazer
  {
    folder: "5 Stars",
    image: "Character_Trailblazer_Icon.webp",
    element: "Wild Card",
    path: "Wild Card",
    gender: "Wild Card",
    range: "Wild Card",
  },
  //Welt
  {
    folder: "5 Stars",
    image: "Character_Welt_Icon.webp",
    element: "Imaginary",
    path: "Nihility",
    gender: "Male",
    range: "Ranged",
  },
  //Xueyi
  {
    folder: "4 Stars",
    image: "Character_Xueyi_Icon.webp",
    element: "Quantum",
    path: "Destruction",
    gender: "Female",
    range: "Melee",
  },
  //Yanqing
  {
    folder: "5 Stars",
    image: "Character_Yanqing_Icon.webp",
    element: "Ice",
    path: "Hunt",
    gender: "Male",
    range: "Ranged",
  },
  //Yukong
  {
    folder: "4 Stars",
    image: "Character_Yukong_Icon.webp",
    element: "Imaginary",
    path: "Harmony",
    gender: "Female",
    range: "Ranged",
  },
];

var newPool = [];
var disabledPool = [];
var selectedPool = [];
var charactersAdded = 0;

document.addEventListener("DOMContentLoaded", function () {
  var pageTitle = document.createElement("h2");
  pageTitle.textContent = "Disable Characters"; // Set the title text
  document.body.appendChild(pageTitle);

  // Select images for each elemental affinity
  var fireImage = document.querySelector(
    ".element_filters img[src='Elements/Fire.png']"
  );
  var iceImage = document.querySelector(
    ".element_filters img[src='Elements/Ice.png']"
  );
  var imaginaryImage = document.querySelector(
    ".element_filters img[src='Elements/Imaginary.png']"
  );
  var lightningImage = document.querySelector(
    ".element_filters img[src='Elements/Lightning.png']"
  );
  var physicalImage = document.querySelector(
    ".element_filters img[src='Elements/Physical.png']"
  );
  var quantumImage = document.querySelector(
    ".element_filters img[src='Elements/Quantum.png']"
  );
  var windImage = document.querySelector(
    ".element_filters img[src='Elements/Wind.png']"
  );

  // Add click event listeners to each image
  fireImage.addEventListener("click", function (event) {
    toggleFilter("Fire", event.target);
  });

  iceImage.addEventListener("click", function (event) {
    toggleFilter("Ice", event.target);
  });

  imaginaryImage.addEventListener("click", function (event) {
    toggleFilter("Imaginary", event.target);
  });

  lightningImage.addEventListener("click", function (event) {
    toggleFilter("Lightning", event.target);
  });

  physicalImage.addEventListener("click", function (event) {
    toggleFilter("Physical", event.target);
  });

  quantumImage.addEventListener("click", function (event) {
    toggleFilter("Quantum", event.target);
  });

  windImage.addEventListener("click", function (event) {
    toggleFilter("Wind", event.target);
  });

  var abundanceImage = document.querySelector(
    ".element_filters img[src='Paths/Abundance.png']"
  );
  var desturctionImage = document.querySelector(
    ".element_filters img[src='Paths/Destruction.png']"
  );
  var eruditionImage = document.querySelector(
    ".element_filters img[src='Paths/Erudition.png']"
  );
  var harmonyImage = document.querySelector(
    ".element_filters img[src='Paths/Harmony.png']"
  );
  var huntImage = document.querySelector(
    ".element_filters img[src='Paths/Hunt.png']"
  );
  var nihilityImage = document.querySelector(
    ".element_filters img[src='Paths/Nihility.png']"
  );
  var preservationImage = document.querySelector(
    ".element_filters img[src='Paths/Preservation.png']"
  );

  abundanceImage.addEventListener("click", function (event) {
    togglePathFilter("Abundance", event.target);
  });

  desturctionImage.addEventListener("click", function (event) {
    togglePathFilter("Destruction", event.target);
  });
  eruditionImage.addEventListener("click", function (event) {
    togglePathFilter("Erudition", event.target);
  });

  harmonyImage.addEventListener("click", function (event) {
    togglePathFilter("Harmony", event.target);
  });

  huntImage.addEventListener("click", function (event) {
    togglePathFilter("Hunt", event.target);
  });

  nihilityImage.addEventListener("click", function (event) {
    togglePathFilter("Nihility", event.target);
  });

  preservationImage.addEventListener("click", function (event) {
    togglePathFilter("Preservation", event.target);
  });

  var femaleImage = document.querySelector(
    ".element_filters img[src='Gender/Female.png']"
  );
  var maleImage = document.querySelector(
    ".element_filters img[src='Gender/Male.png']"
  );

  femaleImage.addEventListener("click", function (event) {
    toggleGenderFilter("Female", event.target);
  });
  maleImage.addEventListener("click", function (event) {
    toggleGenderFilter("Male", event.target);
  });

  var rangedImage = document.querySelector(
    ".element_filters img[src='Range/Ranged.png']"
  );
  var meleeImage = document.querySelector(
    ".element_filters img[src='Range/Melee.png']"
  );

  rangedImage.addEventListener("click", function (event) {
    toggleRangeFilter("Ranged", event.target);
  });
  meleeImage.addEventListener("click", function (event) {
    toggleRangeFilter("Melee", event.target);
  });

  var fourStarImage = document.querySelector(
    ".element_filters img[src='Rarity/Star4.png']"
  );
  var fiveStarImage = document.querySelector(
    ".element_filters img[src='Rarity/Star5.png']"
  );

  fourStarImage.addEventListener("click", function (event) {
    toggleRarityFilter("Star4", event.target);
  });
  fiveStarImage.addEventListener("click", function (event) {
    toggleRarityFilter("Star5", event.target);
  });

  var characterGrid = document.createElement("div");
  characterGrid.classList.add("character-grid");
  characterGrid.id = "characterGrid";

  characters.forEach(function (character) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("CharacterCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("CharacterPortrait");
    var portraitImg = document.createElement("img");

    // Remove "Character_" prefix and "_Icon" suffix from the image filename
    var imageName = character.image
      .replace("Character_", "")
      .replace("_Icon.webp", "");
    // Replace underscores with spaces
    imageName = imageName.replace(/_/g, " ");

    portraitImg.src =
      "Character Icons/" + character.folder + "/" + character.image;
    portraitDiv.appendChild(portraitImg);

    var elementDiv = document.createElement("div");
    elementDiv.classList.add("Element");
    var elementImg = document.createElement("img");
    elementImg.src = "Elements/" + character.element + ".png";
    elementImg.atl = character.element;
    // Add the image source for the element image
    elementDiv.appendChild(elementImg);

    var pathDiv = document.createElement("div");
    pathDiv.classList.add("Path");
    var pathImg = document.createElement("img");
    pathImg.src = "Paths/" + character.path + ".png"; // Provide the path to the path image
    pathImg.alt = character.path; // Alt text for accessibility
    pathDiv.appendChild(pathImg);
    var nameDiv = document.createElement("div");
    nameDiv.textContent = imageName; // Use the modified image name
    nameDiv.classList.add("CharacterName");

    var genderDiv = document.createElement("div");

    // Conditionally add class based on character's gender
    if (character.gender.trim() === "Female") {
      genderDiv.classList.add("Female");
    } else if (character.gender.trim() === "Male") {
      genderDiv.classList.add("Male");
    }

    var rangedDiv = document.createElement("div");
    if (character.range.trim() === "Ranged") {
      rangedDiv.classList.add("Ranged");
    } else if (character.range.trim() === "Melee") {
      rangedDiv.classList.add("Melee");
    }

    var rarityDiv = document.createElement("div");
    if (character.folder === "4 Stars") {
      rarityDiv.classList.add("Star4");
      portraitImg.style.background =
        "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      rarityDiv.classList.add("Star5");
      portraitImg.style.background =
        "linear-gradient(to bottom, #915b52, #c6a470)";
    }
    characterContainer.appendChild(portraitDiv);
    characterContainer.appendChild(elementDiv);
    characterContainer.appendChild(pathDiv);
    characterContainer.appendChild(nameDiv);
    characterContainer.appendChild(genderDiv);
    characterContainer.appendChild(rangedDiv);
    characterContainer.appendChild(rarityDiv);

    characterContainer.addEventListener("click", function () {
      // Assuming `character` represents the corresponding character object
      var index = disabledPool.findIndex(function (item) {
        return item.image === character.image; // Assuming `image` is a unique identifier for each character
      });

      if (index === -1) {
        // Character not in disabledPool, add it
        disabledPool.push(character);
        this.classList.add("disabled");
      } else {
        // Character already in disabledPool, remove it
        disabledPool.splice(index, 1);
        this.classList.remove("disabled");
      }
    });
    characterGrid.appendChild(characterContainer);
  });

  document.body.appendChild(characterGrid);

  // Create a container div
  var containerDiv = document.createElement("div");
  containerDiv.classList.add("button-container");

  // Create a div for the host button
  var hostDiv = document.createElement("div");
  var hostButton = document.createElement("button");
  hostButton.textContent = "Start The Draft as Host"; // Set the button text
  hostButton.classList.add("draft-button"); // Add a class for styling
  hostDiv.classList.add("host-setup");
  hostDiv.appendChild(hostButton); // Append host button to host div

  // Create a div for the guest button and the input field
  var guestDiv = document.createElement("div");

  // Create the input field
  var inputData = document.createElement("input");
  inputData.type = "text"; // Set input type to text
  inputData.classList.add("input-field");
  inputData.placeholder = "Enter Seed Here..."; // Set placeholder text
  guestDiv.classList.add("guest-setup");
  guestDiv.appendChild(inputData); // Append input field to guest div

  var guestButton = document.createElement("button");
  guestButton.textContent = "Start The Draft as Guest"; // Set the button text
  guestButton.classList.add("draft-button"); // Add a class for styling
  guestDiv.appendChild(guestButton); // Append guest button to guest div

  // Append host div and guest div to container div
  containerDiv.appendChild(hostDiv);
  containerDiv.appendChild(guestDiv);

  // Append container div to the document body
  document.body.appendChild(containerDiv);
  //
  //
  //
  //
  //
  //
  // Event listener for the "Start The Draft" button

  var draftGrid = document.createElement("div");
  draftGrid.classList.add("draft-grid");
  draftGrid.id = "characterGrid";
  document.body.appendChild(draftGrid);

  hostButton.addEventListener("click", function () {
    var existingH2 = document.querySelector("h2");
    if (existingH2) {
      existingH2.parentNode.removeChild(existingH2);
    }

    var filtersSegment = document.querySelector(".filters");
    if (filtersSegment) {
      filtersSegment.parentNode.removeChild(filtersSegment);
    }

    var buttonsSegment = document.querySelector(".button-container");
    if (buttonsSegment) {
      buttonsSegment.parentNode.removeChild(buttonsSegment);
    }

    // Insert the new h2 element before the draft grid

    var draftGrid = document.querySelector(".draft-grid");

    //this.parentNode.removeChild(this);
    // Clear any existing character portraits in the draft grid
    draftGrid.innerHTML = "";
    characterGrid.innerHTML = "";

    // Shuffle the characters array to randomize the selection

    var pool = makePool();
    BeginDraft(pool, draftGrid);
  });
  guestButton.addEventListener("click", function () {
    var existingH2 = document.querySelector("h2");
    if (existingH2) {
      existingH2.parentNode.removeChild(existingH2);
    }

    var filtersSegment = document.querySelector(".filters");
    if (filtersSegment) {
      filtersSegment.parentNode.removeChild(filtersSegment);
    }

    var buttonsSegment = document.querySelector(".button-container");
    if (buttonsSegment) {
      buttonsSegment.parentNode.removeChild(buttonsSegment);
    }

    // Insert the new h2 element before the draft grid

    var draftGrid = document.querySelector(".draft-grid");

    //this.parentNode.removeChild(this);
    // Clear any existing character portraits in the draft grid
    draftGrid.innerHTML = "";
    characterGrid.innerHTML = "";

    // Shuffle the characters array to randomize the selection

    var pool = makePool();
    var encryptedSeed = inputData.value;
    var seed = decryptSeed(encryptedSeed);

    BeginSeededDraft(pool, draftGrid, seed);
  });
});

function makePool() {
  return characters.filter(function (character) {
    // Return characters that are not in the disabled pool
    return !disabledPool.includes(character);
  });
}

/*
function BeginDraft(pool, draftGrid) {
  // Encrypt the length of the pool array
  var encryptedSeed = encryptSeed(pool.length);

  // Continue with the draft process using the encrypted seed
  // Shuffle the characters based on the encrypted seed
  var shuffledCharacters = pool.sort(() => Math.random() - 0.5);

  // Select the first three characters for the draft
  var initialCharacters = shuffledCharacters.slice(0, 3);

  createTable();

  // Populate the draft grid with the initial character portraits
  initialCharacters.forEach(function (character) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");
    portraitImg.src =
      "Character Icons/" + character.folder + "/" + character.image;
    portraitDiv.appendChild(portraitImg);

    if (character.folder === "4 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #915b52, #c6a470)";
    }

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      // Reset the background color on mouse leave
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
      // Remove character from pool
      var index = pool.indexOf(character);
      if (index !== -1) {
        pool.splice(index, 1);
      }
      displaySelectedCharacter(portraitImg, character);
      // Refresh draft grid with updated pool
      refreshDraftGrid(pool, draftGrid);
    };

    // Append the portrait to the character container
    characterContainer.appendChild(portraitDiv);

    // Append the character container to the draft grid
    draftGrid.appendChild(characterContainer);
  });
}
*/

/*
function BeginDraft(pool, draftGrid) {
  // Encrypt the length of the pool array
  var seed = generateCustomSeed(pool.length);

  var displaySeed = encryptSeed(seed);

  var newH2 = document.createElement("h2");
  newH2.textContent = "Draft Seed: " + displaySeed;
  if (draftGrid) {
    draftGrid.parentNode.insertBefore(newH2, draftGrid);
  }

  // Remove the first item from the encryptedSeed array
  seed = seed.slice(1); // Make sure encryptedSeed is an array before using shift()


  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);


  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");
    portraitImg.src =
      "Character Icons/" + character.folder + "/" + character.image;
    portraitDiv.appendChild(portraitImg);

    if (character.folder === "4 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #915b52, #c6a470)";
    }

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      // Reset the background color on mouse leave
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
      // Remove character from pool
      var index = pool.indexOf(character);
      if (index !== -1) {
        pool.splice(index, 1);
      }
      displaySelectedCharacter(portraitImg, character);
      // Refresh draft grid with updated pool
      refreshDraftGrid(pool, draftGrid, seed);
    };

    // Append the portrait to the character container
    characterContainer.appendChild(portraitDiv);

    // Append the character container to the draft grid
    draftGrid.appendChild(characterContainer);
  });
  createTable();
}

function BeginSeededDraft(pool, draftGrid, seed) {
  var displaySeed = encryptSeed(seed);

  var newH2 = document.createElement("h2");
  newH2.textContent = "Draft Seed: " + displaySeed;
  if (draftGrid) {
    draftGrid.parentNode.insertBefore(newH2, draftGrid);
  }

  // Remove the first item from the encryptedSeed array
  seed = seed.slice(1); // Make sure encryptedSeed is an array before using shift()


  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);


  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");
    portraitImg.src =
      "Character Icons/" + character.folder + "/" + character.image;
    portraitDiv.appendChild(portraitImg);

    if (character.folder === "4 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #915b52, #c6a470)";
    }

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      // Reset the background color on mouse leave
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
      // Remove character from pool
      var index = pool.indexOf(character);
      if (index !== -1) {
        pool.splice(index, 1);
      }
      displaySelectedCharacter(portraitImg, character);
      // Refresh draft grid with updated pool
      refreshDraftGrid(pool, draftGrid, seed);
    };

    // Append the portrait to the character container
    characterContainer.appendChild(portraitDiv);

    // Append the character container to the draft grid
    draftGrid.appendChild(characterContainer);
  });
  createTable();
}

function refreshDraftGrid(pool, draftGrid, seed) {
  draftGrid.innerHTML = "";
  // Remove the first item from the encryptedSeed array


  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);


  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  if (pool.length === 2) {
    draftGrid.style.gridTemplateColumns = `repeat(2, minmax(200px, 1fr))`;
    draftGrid.style.width = `400px`;
  }

  if (pool.length === 1) {
    draftGrid.style.gridTemplateColumns = `repeat(1, minmax(200px, 1fr))`;
    draftGrid.style.width = `200px`;
  }

  selectedCharacters.forEach(function (character) {
    // Create character container
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    // Create portrait element
    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");
    portraitImg.src =
      "Character Icons/" + character.folder + "/" + character.image;
    portraitDiv.appendChild(portraitImg);

    // Set background color based on star rating
    if (character.folder === "4 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      portraitImg.style.background =
        "linear-gradient(to bottom, #915b52, #c6a470)";
    }

    // Add mouse enter and leave event listeners
    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      // Reset the background color on mouse leave
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    // Add onclick event to remove character from pool and refresh draft grid
    characterContainer.onclick = function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
      // Remove character from pool
      var index = pool.indexOf(character);
      if (index !== -1) {
        pool.splice(index, 1);
      }
      displaySelectedCharacter(portraitImg, character);
      // Refresh draft grid with updated pool
      if (charactersAdded !== 12) {
        refreshDraftGrid(pool, draftGrid, seed);
      } else {
        // If 12 characters are selected, remove the draft grid
        draftGrid.remove();
      }
    };

    // Append portrait to character container
    characterContainer.appendChild(portraitDiv);

    // Append character container to draft grid
    draftGrid.appendChild(characterContainer);
  });
}
*/

function BeginDraft(pool, draftGrid) {
  // Encrypt the length of the pool array
  var seed = generateCustomSeed(pool.length);

  var displaySeed = encryptSeed(seed);

  var newH2 = document.createElement("h2");
  newH2.textContent = "Draft Seed: " + displaySeed;
  if (draftGrid) {
    draftGrid.parentNode.insertBefore(newH2, draftGrid);
  }

  // Remove the first item from the encryptedSeed array
  seed = seed.slice(1); // Make sure encryptedSeed is an array before using shift()

  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);

  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character, index) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");

    // Set image source based on character or random.png for 2nd and 3rd grids

    if (index === 0) {
      portraitImg.src =
        "Character Icons/" + character.folder + "/" + character.image;
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    } else {
      portraitImg.src = "random.png"; // Placeholder image for 2nd and 3rd grids
      portraitImg.addEventListener("mouseover", function () {
        portraitImg.src = "randomhover.png"; // Change the image source on mouseover
      });

      portraitImg.addEventListener("mouseout", function () {
        portraitImg.src = "random.png"; // Revert to the original image source on mouseout
      });
    }

    portraitDiv.appendChild(portraitImg);

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (index === 0) {
        // Change the background color based on character folder
        if (character.folder === "4 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #404066, #9864cd)";
        } else if (character.folder === "5 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #915b52, #c6a470)";
        }
        // Remove character from pool
        console.log(pool);
        var index = pool.indexOf(character);
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        // Refresh draft grid with updated pool
        refreshDraftGrid(pool, draftGrid, seed);
      } else {
        // Display the actual character image below the grid
        var characterImage = document.createElement("img");
        characterImage.src =
          "Character Icons/" + character.folder + "/" + character.image;
        console.log(pool);
        // Remove character from pool
        var index = pool.findIndex(function (poolCharacter) {
          return (
            poolCharacter.folder === character.folder &&
            poolCharacter.image === character.image
          );
        });
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        displaySelectedCharacter(characterImage, character);
        refreshDraftGrid(pool, draftGrid, seed);
      }
    };

    characterContainer.appendChild(portraitDiv);
    draftGrid.appendChild(characterContainer);
  });

  createTable();
}

function BeginSeededDraft(pool, draftGrid, seed) {
  var displaySeed = encryptSeed(seed);

  var newH2 = document.createElement("h2");
  newH2.textContent = "Draft Seed: " + displaySeed;
  if (draftGrid) {
    draftGrid.parentNode.insertBefore(newH2, draftGrid);
  }

  // Remove the first item from the encryptedSeed array
  seed = seed.slice(1); // Make sure encryptedSeed is an array before using shift()

  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);

  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character, index) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");

    // Set image source based on character or random.png for 2nd and 3rd grids

    if (index === 2) {
      portraitImg.src =
        "Character Icons/" + character.folder + "/" + character.image;
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    } else {
      portraitImg.src = "random.png"; // Placeholder image for 2nd and 3rd grids
      portraitImg.addEventListener("mouseover", function () {
        portraitImg.src = "randomhover.png"; // Change the image source on mouseover
      });

      portraitImg.addEventListener("mouseout", function () {
        portraitImg.src = "random.png"; // Revert to the original image source on mouseout
      });
    }

    portraitDiv.appendChild(portraitImg);

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (index === 2) {
        // Change the background color based on character folder
        if (character.folder === "4 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #404066, #9864cd)";
        } else if (character.folder === "5 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #915b52, #c6a470)";
        }
        // Remove character from pool
        console.log(pool);
        var index = pool.indexOf(character);
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        // Refresh draft grid with updated pool
        refreshSeededDraftGrid(pool, draftGrid, seed);
      } else {
        // Display the actual character image below the grid
        var characterImage = document.createElement("img");
        characterImage.src =
          "Character Icons/" + character.folder + "/" + character.image;
        console.log(pool);
        // Remove character from pool
        var index = pool.findIndex(function (poolCharacter) {
          return (
            poolCharacter.folder === character.folder &&
            poolCharacter.image === character.image
          );
        });
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        displaySelectedCharacter(characterImage, character);
        refreshSeededDraftGrid(pool, draftGrid, seed);
      }
    };

    characterContainer.appendChild(portraitDiv);
    draftGrid.appendChild(characterContainer);
  });

  createTable();
}

function refreshDraftGrid(pool, draftGrid, seed) {
  draftGrid.innerHTML = "";
  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);

  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character, index) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");

    // Set image source based on character or random.png for 2nd and 3rd grids

    if (index === 0) {
      portraitImg.src =
        "Character Icons/" + character.folder + "/" + character.image;
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    } else {
      portraitImg.src = "random.png"; // Placeholder image for 2nd and 3rd grids
      portraitImg.addEventListener("mouseover", function () {
        portraitImg.src = "randomhover.png"; // Change the image source on mouseover
      });

      portraitImg.addEventListener("mouseout", function () {
        portraitImg.src = "random.png"; // Revert to the original image source on mouseout
      });
    }

    portraitDiv.appendChild(portraitImg);

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (index === 0) {
        // Change the background color based on character folder
        if (character.folder === "4 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #404066, #9864cd)";
        } else if (character.folder === "5 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #915b52, #c6a470)";
        }
        // Remove character from pool
        console.log(pool);
        var index = pool.indexOf(character);
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        // Refresh draft grid with updated pool
        refreshDraftGrid(pool, draftGrid, seed);
      } else {
        // Display the actual character image below the grid
        var characterImage = document.createElement("img");
        characterImage.src =
          "Character Icons/" + character.folder + "/" + character.image;
        console.log(pool);
        // Remove character from pool
        var index = pool.findIndex(function (poolCharacter) {
          return (
            poolCharacter.folder === character.folder &&
            poolCharacter.image === character.image
          );
        });
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        displaySelectedCharacter(characterImage, character);
        if (charactersAdded !== 12) {
          refreshDraftGrid(pool, draftGrid, seed);
        } else {
          // If 12 characters are selected, remove the draft grid
          draftGrid.remove();
        }
      }
    };

    characterContainer.appendChild(portraitDiv);
    draftGrid.appendChild(characterContainer);
  });
}

function refreshSeededDraftGrid(pool, draftGrid, seed) {
  draftGrid.innerHTML = "";
  // Continue with the draft process using the modified encryptedSeed
  // For example, you can use the modified encryptedSeed for further processing
  var index1 = seed[0];
  var index2 = seed[1];
  var index3 = seed[2];
  seed = seed.slice(1);
  seed = seed.slice(1);
  seed = seed.slice(1);

  // Retrieve characters from the pool array using the indices
  var selectedCharacters = [pool[index1], pool[index2], pool[index3]];

  selectedCharacters.forEach(function (character, index) {
    var characterContainer = document.createElement("button");
    characterContainer.classList.add("DraftCard");

    var portraitDiv = document.createElement("div");
    portraitDiv.classList.add("DraftPortrait");
    var portraitImg = document.createElement("img");

    // Set image source based on character or random.png for 2nd and 3rd grids

    if (index === 2) {
      portraitImg.src =
        "Character Icons/" + character.folder + "/" + character.image;
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    } else {
      portraitImg.src = "random.png"; // Placeholder image for 2nd and 3rd grids
      portraitImg.addEventListener("mouseover", function () {
        portraitImg.src = "randomhover.png"; // Change the image source on mouseover
      });

      portraitImg.addEventListener("mouseout", function () {
        portraitImg.src = "random.png"; // Revert to the original image source on mouseout
      });
    }

    portraitDiv.appendChild(portraitImg);

    portraitDiv.addEventListener("mouseenter", function () {
      portraitImg.style.background = "#cad4ff";
    });

    portraitDiv.addEventListener("mouseleave", function () {
      if (character.folder === "4 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #404066, #9864cd)";
      } else if (character.folder === "5 Stars") {
        portraitImg.style.background =
          "linear-gradient(to bottom, #915b52, #c6a470)";
      }
    });

    characterContainer.onclick = function () {
      if (index === 2) {
        // Change the background color based on character folder
        if (character.folder === "4 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #404066, #9864cd)";
        } else if (character.folder === "5 Stars") {
          portraitImg.style.background =
            "linear-gradient(to bottom, #915b52, #c6a470)";
        }
        // Remove character from pool
        console.log(pool);
        var index = pool.indexOf(character);
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        // Refresh draft grid with updated pool
        refreshSeededDraftGrid(pool, draftGrid, seed);
      } else {
        // Display the actual character image below the grid
        var characterImage = document.createElement("img");
        characterImage.src =
          "Character Icons/" + character.folder + "/" + character.image;
        console.log(pool);
        // Remove character from pool
        var index = pool.findIndex(function (poolCharacter) {
          return (
            poolCharacter.folder === character.folder &&
            poolCharacter.image === character.image
          );
        });
        if (index !== -1) {
          pool.splice(index, 1);
        }
        console.log(pool);
        displaySelectedCharacter(characterImage, character);
        if (charactersAdded !== 12) {
          refreshSeededDraftGrid(pool, draftGrid, seed);
        } else {
          // If 12 characters are selected, remove the draft grid
          draftGrid.remove();
        }
      }
    };

    characterContainer.appendChild(portraitDiv);
    draftGrid.appendChild(characterContainer);
  });
}

function createTable() {
  var table = document.createElement("table");
  var tableBody = document.createElement("tbody");
  table.appendChild(tableBody);

  // Set ID for table body
  tableBody.id = "selectedCharactersTableBody";

  // Append the table below the draft grid
  var draftGrid = document.querySelector(".draft-grid");
  draftGrid.insertAdjacentElement("afterend", table);
}

function displaySelectedCharacter(portraitImgElement, character) {
  // Get the table body element where selected characters will be displayed
  var tableBody = document.getElementById("selectedCharactersTableBody");

  // Check if the current row is full (4 characters per row) or if the maximum limit of 12 characters is reached
  var currentRow = tableBody.rows[tableBody.rows.length - 1];
  if (!currentRow || currentRow.cells.length >= 4 || charactersAdded >= 12) {
    // Create a new row if the current row is full, doesn't exist, or the limit is reached
    currentRow = tableBody.insertRow();
  }

  if (charactersAdded < 12) {
    // Create a new table cell for the character portrait image
    var newCell = currentRow.insertCell();

    if (character.folder === "4 Stars") {
      newCell.style.background = "linear-gradient(to bottom, #404066, #9864cd)";
    } else if (character.folder === "5 Stars") {
      newCell.style.background = "linear-gradient(to bottom, #915b52, #c6a470)";
    }

    // Append the character portrait image to the table cell
    newCell.appendChild(portraitImgElement);

    charactersAdded++; // Increment the count of characters added
  }
}

// Function to toggle the filter based on the selected element
function toggleFilter(element, clickedImage) {
  // Check if the clicked filter is already active
  var isActive = clickedImage.classList.contains("active");

  // Get all filter images
  var allFilters = document.querySelectorAll(".element_filters img");

  // If the clicked filter is already active, reset filters and display all characters
  if (isActive) {
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    var characterCards = document.querySelectorAll(".CharacterCard");
    characterCards.forEach(function (card) {
      card.style.display = ""; // Show the card
    });
  } else {
    // Reset all filters to inactive
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    // Activate the clicked filter
    clickedImage.classList.add("active");

    // Get all character cards
    var characterCards = document.querySelectorAll(".CharacterCard");

    // Show characters with the selected element
    characterCards.forEach(function (card) {
      if (
        card.querySelector(".Element img[src='Elements/" + element + ".png']")
      ) {
        card.style.display = ""; // Show the card
      } else {
        card.style.display = "none"; // Hide the card
      }
    });
  }
}

function togglePathFilter(element, clickedImage) {
  // Check if the clicked filter is already active
  var isActive = clickedImage.classList.contains("active");

  // Get all filter images
  var allFilters = document.querySelectorAll(".element_filters img");

  // If the clicked filter is already active, reset filters and display all characters
  if (isActive) {
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    var characterCards = document.querySelectorAll(".CharacterCard");
    characterCards.forEach(function (card) {
      card.style.display = ""; // Show the card
    });
  } else {
    // Reset all filters to inactive
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    // Activate the clicked filter
    clickedImage.classList.add("active");

    // Get all character cards
    var characterCards = document.querySelectorAll(".CharacterCard");

    // Show characters with the selected element
    characterCards.forEach(function (card) {
      if (card.querySelector(".Path img[src='Paths/" + element + ".png']")) {
        card.style.display = ""; // Show the card
      } else {
        card.style.display = "none"; // Hide the card
      }
    });
  }
}

function toggleGenderFilter(element, clickedImage) {
  // Check if the clicked filter is already active
  var isActive = clickedImage.classList.contains("active");

  // Get all filter images
  var allFilters = document.querySelectorAll(".element_filters img");

  // If the clicked filter is already active, reset filters and display all characters
  if (isActive) {
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    var characterCards = document.querySelectorAll(".CharacterCard");
    characterCards.forEach(function (card) {
      card.style.display = ""; // Show the card
    });
  } else {
    // Reset all filters to inactive
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    // Activate the clicked filter
    clickedImage.classList.add("active");

    // Get all character cards
    var characterCards = document.querySelectorAll(".CharacterCard");

    // Show characters with the selected element
    characterCards.forEach(function (card) {
      if (card.querySelector("." + element)) {
        card.style.display = ""; // Show the card
      } else {
        card.style.display = "none"; // Hide the card
      }
    });
  }
}

function toggleRangeFilter(element, clickedImage) {
  // Check if the clicked filter is already active
  var isActive = clickedImage.classList.contains("active");

  // Get all filter images
  var allFilters = document.querySelectorAll(".element_filters img");

  // If the clicked filter is already active, reset filters and display all characters
  if (isActive) {
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    var characterCards = document.querySelectorAll(".CharacterCard");
    characterCards.forEach(function (card) {
      card.style.display = ""; // Show the card
    });
  } else {
    // Reset all filters to inactive
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    // Activate the clicked filter
    clickedImage.classList.add("active");

    // Get all character cards
    var characterCards = document.querySelectorAll(".CharacterCard");

    // Show characters with the selected element
    characterCards.forEach(function (card) {
      if (card.querySelector("." + element)) {
        card.style.display = ""; // Show the card
      } else {
        card.style.display = "none"; // Hide the card
      }
    });
  }
}

function toggleRarityFilter(element, clickedImage) {
  // Check if the clicked filter is already active
  var isActive = clickedImage.classList.contains("active");

  // Get all filter images
  var allFilters = document.querySelectorAll(".element_filters img");

  // If the clicked filter is already active, reset filters and display all characters
  if (isActive) {
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    var characterCards = document.querySelectorAll(".CharacterCard");
    characterCards.forEach(function (card) {
      card.style.display = ""; // Show the card
    });
  } else {
    // Reset all filters to inactive
    allFilters.forEach(function (filter) {
      filter.classList.remove("active");
    });
    // Activate the clicked filter
    clickedImage.classList.add("active");

    // Get all character cards
    var characterCards = document.querySelectorAll(".CharacterCard");

    // Show characters with the selected element
    characterCards.forEach(function (card) {
      if (card.querySelector("." + element)) {
        card.style.display = ""; // Show the card
      } else {
        card.style.display = "none"; // Hide the card
      }
    });
  }
}

function generateCustomSeed(poolLength) {
  var seedElements = [];
  seedElements.push(poolLength);

  // Determine the upper bound for the loop
  var loopLimit = Math.min(12, poolLength);

  // Loop from 0 to loopLimit
  for (var i = 0; i < loopLimit; i++) {
    // Initialize an array to keep track of generated numbers
    var generatedNumbers = [];

    // Generate 3 unique random numbers
    for (var j = 0; j < 3; j++) {
      var randomNumber;

      // Generate a random number and check if it's already in the array
      do {
        randomNumber = Math.floor(Math.random() * (poolLength - i));
      } while (generatedNumbers.includes(randomNumber));

      // Add the unique random number to the array and push it to seedElements
      generatedNumbers.push(randomNumber);
      seedElements.push(randomNumber);
    }
  }
  return seedElements;
}
function encryptSeed(seedElements) {
  // Initialize an empty string to store the encrypted seed
  var encryptedSeed = "";

  // Iterate through each element in the seedElements array
  for (var i = 0; i < seedElements.length; i++) {
    // Convert the number to a 2-digit hexadecimal representation
    var hex = seedElements[i].toString(16).padStart(2, "0");

    // Concatenate the hexadecimal representation to the encrypted seed string
    encryptedSeed += hex;
  }

  // Return the encrypted seed string
  return encryptedSeed;
}

function decryptSeed(encryptedSeed) {
  // Initialize an array to store the decrypted seed
  var decryptedSeed = [];

  // Split the encryptedSeed string into sets of 2 characters
  for (var i = 0; i < encryptedSeed.length; i += 2) {
    // Extract the 2-character substring
    var hexPair = encryptedSeed.substring(i, i + 2);

    // Convert the hexadecimal substring to decimal and push it to the decryptedSeed array
    decryptedSeed.push(parseInt(hexPair, 16));
  }

  // Return the decrypted seed array
  return decryptedSeed;
}
